---
phase: 04-art-and-audio
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - css/styles.css
  - css/dialogue.css
  - css/inventory.css
  - js/rooms.js
  - js/game.js
  - js/scene.js
  - js/dialogue.js
  - js/dialogues.js
  - js/cursor.js
  - index.html
autonomous: true

must_haves:
  truths:
    - "All five game rooms display distinct background art (CSS gradients with atmospheric styling) instead of flat solid colors"
    - "Title screen and ending screen display thematic artwork behind the overlay text"
    - "NPC dialogue shows character portrait images instead of colored circle placeholders"
    - "Cursor icons visually distinguish between look, use, talk, and exit modes using custom SVG cursors"
    - "Inventory items display recognizable SVG icons instead of emoji or first-letter fallbacks"
  artifacts:
    - path: "css/styles.css"
      provides: "Custom cursor icon definitions, room background art via CSS"
    - path: "js/rooms.js"
      provides: "backgroundImage or background CSS with atmospheric gradients for all rooms"
    - path: "js/dialogue.js"
      provides: "Portrait image rendering instead of placeholder circles"
    - path: "js/dialogues.js"
      provides: "Portrait image references for each NPC"
    - path: "css/inventory.css"
      provides: "SVG inventory item icon styling"
  key_links:
    - from: "js/rooms.js"
      to: "css/styles.css"
      via: "background/backgroundImage properties on scene data"
      pattern: "background.*gradient|backgroundImage"
    - from: "js/dialogue.js"
      to: "js/dialogues.js"
      via: "portrait field in dialogue tree data"
      pattern: "portrait"
    - from: "js/cursor.js"
      to: "css/styles.css"
      via: "cursor CSS classes with custom SVG URLs"
      pattern: "cursor.*url"
---

<objective>
Replace all placeholder visuals with polished art: atmospheric CSS gradient backgrounds for all rooms, SVG character portraits for NPC dialogue, custom SVG cursor icons for interaction modes, and SVG inventory item icons. The game should look like a real point-and-click adventure.

Purpose: Transform the game from developer placeholders to finished visual product. This is the "looks like a real game" plan.
Output: All visual assets integrated -- backgrounds, portraits, cursors, inventory icons -- with a cohesive afterlife-office aesthetic.
</objective>

<execution_context>
@/Users/brent/.claude/get-shit-done/workflows/execute-plan.md
@/Users/brent/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/03-puzzle-chain/03-01-SUMMARY.md
@js/rooms.js
@js/game.js
@js/scene.js
@js/dialogue.js
@js/dialogues.js
@js/cursor.js
@js/inventory.js
@css/styles.css
@css/dialogue.css
@css/inventory.css
@index.html
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create atmospheric room backgrounds, title/ending art, and character portraits</name>
  <files>js/rooms.js, js/game.js, js/dialogue.js, js/dialogues.js, css/styles.css, css/dialogue.css</files>
  <action>
Replace all flat solid-color backgrounds with rich CSS gradients that evoke the afterlife-office atmosphere. Each room needs a distinct visual identity:

**Room backgrounds (update `background` property in rooms.js for each room):**
- title-screen: Dark moody gradient (deep indigo to near-black) with subtle vignette feel
- waiting-room: Sickly fluorescent green-gray gradient suggesting harsh office lighting, faded institutional walls
- front-desk: Warm amber-brown gradient suggesting wood paneling and desk lamps, bureaucratic warmth
- break-room: Cool blue-gray gradient with a hint of coffee-brown, sterile break room lighting
- filing-room: Dusty beige-to-dark gradient, cramped paper-filled space feel
- managers-office: Rich dark wood tones, deep burgundy-to-brown, the "nice" office
- ending-screen: Golden warm gradient (amber to white) suggesting light/transcendence/moving on

Use CSS `linear-gradient` or `radial-gradient` values in the `background` field. The Scene.render function already applies `background` as backgroundColor -- update it to handle gradient strings properly. In scene.js, change `background.style.backgroundColor = sceneData.background` to detect if the value contains "gradient" and use `background.style.background` instead (this works for both solid colors and gradients).

**Title screen art:**
In game.js `showTitleScreen`, add a subtle CSS background pattern or radial glow effect behind the title text. Give the title-overlay a semi-transparent dark backdrop with a radial gradient highlight.

**Ending screen art:**
In game.js `showEndingScreen`, style the ending-overlay with a warm golden radial glow that suggests transcendence/light.

**Character portraits:**
Replace the colored-circle placeholder system in dialogue.js with inline SVG portraits:
- Create a `portraitSVG` property in each dialogue tree in dialogues.js (alongside the existing `portrait` color):
  - Clerk: Bored face with half-closed eyes, simple geometric SVG (circle head, dot eyes, flat mouth line, maybe a small tie). Color scheme: gray/muted.
  - Filing Cabinet: A literal filing cabinet with a face -- rectangular body, drawer handles as eyes, label slot as mouth. Color scheme: metallic gray/olive.
  - Manager: Overly cheerful face, wide smile, perhaps a small crown or halo. Color scheme: warm gold/burgundy.

- In dialogue.js, when rendering portrait, check if the current dialogue tree has `portraitSVG`. If so, create an `img` element with the SVG as a data URI (`data:image/svg+xml,...`). If not, fall back to the existing colored circle.

- The portrait container (.dialogue-portrait) should display the SVG at 80x80px. Update css/dialogue.css to style `.dialogue-portrait img` to fit properly (width: 80px, height: 80px, border-radius: 8px, border: 3px solid #777).

Each SVG should be a self-contained inline SVG string (no external files). Keep them simple but recognizable -- geometric/minimal style that fits the game's aesthetic. Encode SVGs as data URIs using encodeURIComponent.

**Morgan portrait (for potential future use):**
Add a `morganPortraitSVG` on the Dialogues module -- a simple face with one raised eyebrow suggesting dry sarcasm. Not wired to dialogue yet but available.
  </action>
  <verify>
Open index.html in browser. Each room should show a distinct gradient background instead of a flat color. Title and ending screens should have atmospheric backgrounds. Opening any NPC dialogue should show an SVG portrait (not a colored circle with a letter). Check browser console for no errors.
  </verify>
  <done>
All 7 scene backgrounds use CSS gradients. Title/ending overlays have atmospheric styling. All 3 NPC dialogues display SVG character portraits instead of placeholder circles. No JavaScript errors in console.
  </done>
</task>

<task type="auto">
  <name>Task 2: Create custom cursor icons and inventory item SVG icons</name>
  <files>css/styles.css, js/cursor.js, js/rooms.js, css/inventory.css, js/inventory.js</files>
  <action>
**Custom cursor icons:**
Replace the CSS `cursor` property values (help, pointer, crosshair, e-resize) with custom SVG cursor icons that look like point-and-click adventure game cursors.

Create inline SVG data URI cursors in css/styles.css:
- cursor-default: Simple arrow pointer (white with dark outline)
- cursor-look: Magnifying glass icon (circle with handle, suggesting "examine")
- cursor-use: Open hand / grab icon (suggesting "interact/use")
- cursor-talk: Speech bubble icon (rounded rectangle with tail)
- cursor-exit: Arrow pointing right with a door outline (suggesting "go to")

Format: `cursor: url('data:image/svg+xml,...') [hotspot-x] [hotspot-y], auto;`
SVG size: 32x32px. Hotspot at logical click point (tip of arrow, center of magnifying glass, etc).
Use `encodeURIComponent()` or URL-safe encoding for the SVG in the data URI.
Test that cursor: url() works -- include a fallback CSS cursor after the SVG cursor for browser compat (e.g. `cursor: url(...), help;`).

**Inventory item SVG icons:**
Currently `itemIcon: null` in rooms.js for all pickup items. Replace with inline SVG data URIs for each inventory item:
- bent-paperclip: A bent paperclip shape (simple wire form)
- ticket-number: A small ticket/number slip
- coffee-mug: A coffee mug outline
- form-27b: A document/form with "27-B" text
- rubber-stamp: A rubber stamp shape

In js/inventory.js, the item rendering code currently uses emoji or first-letter fallback. Update it to check for `itemIcon` and if it's a data URI string, create an `<img>` element instead of text content. Size: 40x40px to fit inventory slots.

Update css/inventory.css: Add `.inventory-item img` styling (width: 40px, height: 40px, object-fit: contain, filter: drop-shadow for visibility on dark background).

Also in rooms.js, set the `itemIcon` field on every pickup hotspot and item-granting dialogue action to the appropriate SVG data URI.

For items granted via dialogue actions (form-27b from Filing Cabinet, ticket-number implicit from flag), check how dialogue actions add items and ensure the icon is included in the item object.
  </action>
  <verify>
Open index.html in browser. Hover over different hotspot types and verify each shows a distinct custom cursor icon. Pick up items and verify inventory bar shows SVG icons instead of emoji/letters. Test all 5 inventory items appear correctly. Check console for no errors.
  </verify>
  <done>
Five custom cursor SVG icons replace CSS cursor keywords. Five inventory items display recognizable SVG icons in the inventory bar. All cursors have working hotspots and fallbacks. No console errors.
  </done>
</task>

</tasks>

<verification>
1. Open index.html -- title screen shows atmospheric dark gradient, not flat #1a1a2e
2. Start game, visit all 5 rooms -- each has a distinct gradient background
3. Talk to any NPC -- dialogue box shows SVG portrait (not colored circle)
4. Hover over look/use/talk/exit hotspots -- each shows different custom cursor icon
5. Pick up an item -- inventory shows SVG icon (not emoji or letter)
6. Complete game to ending -- ending screen has golden glow background
7. No JavaScript errors in console throughout
</verification>

<success_criteria>
- All 7 scenes (title, 5 rooms, ending) display atmospheric CSS gradient backgrounds
- 3 NPC dialogue portraits are SVG character art
- 5 cursor modes use custom SVG icons
- 5 inventory items show SVG icons
- Zero console errors
</success_criteria>

<output>
After completion, create `.planning/phases/04-art-and-audio/04-01-SUMMARY.md`
</output>
